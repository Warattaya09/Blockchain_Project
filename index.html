<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>Deepfake Blockchain Verifier</title>
    <style>
        body { font-family: 'Sarabun', sans-serif; background: #f0f2f5; text-align: center; padding: 50px; }
        .container { background: white; padding: 40px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); max-width: 600px; margin: auto; }
        h1 { color: #333; }
        .btn { background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; margin-top: 10px; }
        .btn:hover { background: #45a049; }
        .result-box { margin-top: 20px; padding: 20px; border-radius: 5px; display: none; }
        .fake { background-color: #ffebee; color: #c62828; border: 1px solid #c62828; }
        .real { background-color: #e8f5e9; color: #2e7d32; border: 1px solid #2e7d32; }
    </style>
</head>
<body>

<div class="container">
    <h1>üõ°Ô∏è Deepfake Detector</h1>
    <p>‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ AI ‡πÅ‡∏•‡∏∞ Blockchain</p>
    
    <input type="file" id="videoInput" accept="video/*" style="margin: 20px 0;">
    <br>
    <button class="btn" onclick="startDetection()">üöÄ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠</button>
    
    <div id="loading" style="display:none; margin-top:20px;">
        ‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏´‡πâ AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Blockchain...
    </div>

    <div id="resultArea" class="result-box">
        <h2 id="resTitle"></h2>
        <p>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à: <span id="resConf"></span>%</p>
        <p>üìù Blockchain Hash: <br><code id="txHash" style="background:#eee; padding:5px;"></code></p>
    </div>
</div>

<script>
    async function startDetection() {
        const fileInput = document.getElementById('videoInput');
        const file = fileInput.files[0];

        if (!file) { alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏Å‡πà‡∏≠‡∏ô!"); return; }

        // 1. ‡πÅ‡∏™‡∏î‡∏á Loading
        document.getElementById('loading').style.display = 'block';
        document.getElementById('resultArea').style.display = 'none';

        // 2. ‡∏™‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏õ‡πÉ‡∏´‡πâ Python (Backend)
        const formData = new FormData();
        formData.append('video', file);

        try {
            const response = await fetch('http://localhost:5000/predict', {
                method: 'POST',
                body: formData
            });
            const data = await response.json();

            // 3. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
            document.getElementById('loading').style.display = 'none';
            const resArea = document.getElementById('resultArea');
            resArea.style.display = 'block';
            
            document.getElementById('resTitle').innerText = "‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå: " + data.result;
            document.getElementById('resConf').innerText = data.confidence;
            
            // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏≤‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
            resArea.className = 'result-box ' + (data.result === 'FAKE' ? 'fake' : 'real');

            // ‡∏à‡∏≥‡∏•‡∏≠‡∏á Blockchain Hash (‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡πÉ‡∏ä‡πâ ethers.js ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° MetaMask ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ)
            document.getElementById('txHash').innerText = "0x" + Math.random().toString(16).substr(2, 40);

        } catch (error) {
            console.error(error);
            alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö AI Server");
        }
    }
</script>

</body>
</html>